<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.23.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Deploy Moodle on OCI with MDS - Oracle Developer Tutorials</title>
<meta name="description" content="MDS (MySQL Database Service) and Moodle are a perfect match for OCI. In this tutorial, you’ll learn how to deploy this popular learning management system with OCI.">


  <meta name="author" content="Frédéric Descamps">
  
  <meta property="article:author" content="Frédéric Descamps">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Oracle Developer Tutorials">
<meta property="og:title" content="Deploy Moodle on OCI with MDS">
<meta property="og:url" content="https://cool.devo.build/tutorials/deploy-moodle-on-OCI-with-mds">


  <meta property="og:description" content="MDS (MySQL Database Service) and Moodle are a perfect match for OCI. In this tutorial, you’ll learn how to deploy this popular learning management system with OCI.">



  <meta property="og:image" content="https://cool.devo.build/tutorials/assets/moodle-database-dropdown.png">




  <meta name="twitter:site" content="@groundbreakers">
  <meta name="twitter:title" content="Deploy Moodle on OCI with MDS">
  <meta name="twitter:description" content="MDS (MySQL Database Service) and Moodle are a perfect match for OCI. In this tutorial, you’ll learn how to deploy this popular learning management system with OCI.">
  <meta name="twitter:url" content="https://cool.devo.build/tutorials/deploy-moodle-on-OCI-with-mds">

  
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://cool.devo.build/tutorials/assets/moodle-database-dropdown.png">
    
  

  
    <meta name="twitter:creator" content="@lefred">
  



  <meta property="article:published_time" content="2021-10-27T09:12:00+00:00">






<link rel="canonical" href="https://cool.devo.build/tutorials/deploy-moodle-on-OCI-with-mds">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://cool.devo.build/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/main.xml" type="application/atom+xml" rel="alternate" title="Oracle Developer Tutorials Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



<link rel="icon" href="https://www.oracle.com/asset/web/favicons/favicon-32.png" sizes="32x32">

    
    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead oracle-header oracle-headerv1 oracle-headeradj oracle-headerdev">
  <div class="masthead__inner-wrap oracle-headerw1">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <div class="oracle-headers1 site-logo">
          <a class="oracle-logo" href="https://developer.oracle.com/"><span>Oracle</span></a>
        </div>
        <div class="u18-title site-title">
          <a href="/">
            Oracle Developer Tutorials
            
          </a>
        </div>

        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/topics/">Explore Topics</a>
            </li><li class="masthead__menu-item">
            <a href="https://signup.cloud.oracle.com/?language=en&sourceType=:ow:de:te::::RC_WWMK211116P00260:DotBuildGetStarted&intcmp=:ow:de:te::::RC_WWMK211116P00260:DotBuildGetStarted">Try Oracle Free</a>
          </li>
        </ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">

    <div class="sidebar sticky">
    <p><strong>Tags:</strong> <span class="tags">

            
            <a class="animated-link tag" href="/topics/oci">oci</a>
            <a class="animated-link tag" href="/topics/mysql">mysql</a>
            </span>
    </p>
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <a href="https:/lefred.be/"><h3 class="author__name" itemprop="name">Frédéric Descamps</h3></a>
    
    
      <div class="author__bio" itemprop="description">
        <p>@lefred has been consulting OpenSource and MySQL for 20+ years. After graduating in Management Information Technology, Frédéric started his career as a developer for an ERP under HPUX.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      
        <li>
          <a href="https://twitter.com/lefred" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://www.linkedin.com/in/freddescamps" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span>
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/lefred" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  
  
  <p><strong>From this author:</strong>
    <ul>
      
        <li><a href="/tutorials/deploying-joomla-on-oci-and-mds">Deploying Joomla! on OCI and MDS</a></li>
      
        <li><a href="/tutorials/matamo-with-oci-mds">Use Matomo Website Analytics on OCI with MDS</a></li>
      
        <li><a href="/tutorials/microsoft-sql-to-mds">How to import data from Microsoft SQL Server to MySQL Database Service</a></li>
      
    </ul>
  
  

  </div>


  <article class="page has-sidebar has-toc" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Deploy Moodle on OCI with MDS">
    
    <meta itemprop="datePublished" content="2021-10-27T09:12:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Deploy Moodle on OCI with MDS
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#simplest-deployment">Simplest Deployment</a></li><li><a href="#other-possible-architectures">Other Possible Architectures</a></li></ul>

            </nav>
          </aside>
        

        <p><a href="https://moodle.org/">Moodle</a> is the world’s most popular learning management system. Moodle is Open Source and of course it’s compatible with the most popular Open Source Database : MySQL!</p>

<p>I’ve already posted <a href="https://lefred.be/content/using-oci-to-install-moodle-with-mysql-8-0/">an article addressing how to install Moodle</a> before we released MySQL Database Service. In this article we will see how to deploy Moodle very easily in OCI and using MDS.</p>

<p>Once again we will use the easiest way to deploy an complete architecture on OCI: Resource Manager.</p>

<p>We will then use a stack I’ve created that is available on <a href="https://github.com/lefred/oci-moodle-mds">GitHub</a> This stack includes Terraform code allowing to deploy different architectures that we can use for Moodle. I’ve tried to cover the main possible architecture directly in the stack. It’s also possible to just download the Terraform code and modify it if you need. You also have the possibility to generate again a stack from your modified code.</p>

<p>I’ve already multiple stacks you can deploy directly on OCI that allows you to deploy the same architectures as I cover in this article but for other solutions directly from this page: <a href="https://lefred.be/deploy-to-oci/">Deploy to OCI</a>.</p>

<p>Let’s have a look at some of the possible architectures we can deploy directly by clicking on the “deploy to OCI” button.</p>

<h2 id="simplest-deployment">Simplest Deployment</h2>

<p><img src="assets/OCI-avail-domain-1.png" alt="Network chart with Moodle in the public subnet, inside the VCN" /></p>

<p>This deployment, is the most simple to deploy. One single MySQL Database Service Instance and one compute instance as the Moodle Web Server.</p>

<p>The architecture is composed by the following components:</p>

<ul>
  <li><strong>Availability domains:</strong> Availability domains are standalone, independent data centers within a region. The physical resources in each availability domain are isolated from the resources in the other availability domains, which provides fault tolerance. Availability domains don’t share infrastructure such as power or cooling, or the internal availability domain network. So, a failure at one availability domain is unlikely to affect the other availability domains in the region.</li>
  <li><strong>Virtual cloud network (VCN) and subnets:</strong> a VCN is a customizable, software-defined network that you set up in an Oracle Cloud Infrastructure region. Like traditional data center networks, VCNs give you complete control over your network environment. A VCN can have multiple non-overlapping CIDR blocks that you can change after you create the VCN. You can segment a VCN into subnets, which can be scoped to a region or to an availability domain. Each subnet consists of a contiguous range of addresses that don’t overlap with the other subnets in the VCN. You can change the size of a subnet after creation. A subnet can be public or private.</li>
  <li><strong>Internet gateway:</strong> the <a href="https://docs.oracle.com/en-us/iaas/Content/Network/Tasks/managingIGs.htm?source=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&pcode=WWMK211125P00025">internet gateway</a> allows traffic between the public subnets in a VCN and the public internet.</li>
  <li><strong>Network security group (NSG):</strong> NSGs act as virtual firewalls for your cloud resources. With the zero-trust security model of Oracle Cloud Infrastructure, all traffic is denied, and you can control the network traffic inside a VCN. An NSG consists of a set of ingress and egress security rules that apply to only a specified set of VNICs in a single VCN.</li>
  <li><strong>MySQL Database Service (MDS):</strong> <a href="https://docs.oracle.com/en-us/iaas/mysql-database/index.html?source=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&pcode=WWMK211125P00025">MySQL Database Service</a> is a fully managed Oracle Cloud Infrastructure (OCI) database service that lets developers quickly develop and deploy secure, cloud native applications. Optimized for and exclusively available in OCI, MySQL Database Service is 100% built, managed, and supported by the OCI and MySQL engineering teams.</li>
  <li><strong>Compute Instance:</strong> <a href="https://docs.oracle.com/en-us/iaas/Content/Compute/Concepts/computeoverview.htm?source=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&pcode=WWMK211125P00025">OCI Compute service</a> enables you provision and manage compute hosts in the cloud. You can launch compute instances with shapes that meet your resource requirements (CPU, memory, network bandwidth, and storage). After creating a compute instance, you can access it securely, restart it, attach and detach volumes, and terminate it when you don’t need it. Apache, PHP and Moodle are installed on the compute instance.</li>
</ul>

<p>Let’s see the different steps to deploy this architecture directly from <a href="https://lefred.be/deploy-to-oci/">here</a>:</p>

<p><img src="assets/deploy-to-oci-callout.png" alt="A dashboard where you can you deploy different services, including Moodle" /></p>

<p>You will redirected the OCI’s dashboard create <a href="https://docs.oracle.com/en/cloud/paas/cloud-stack-manager/csmug/oracle-cloud-stack-manager.htm?source=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&pcode=WWMK211125P00025">stack</a> page:</p>

<p><img src="assets/oci-flow-create-stack-w-callout.png" alt="OCI's Create Stack page, with a callout highlighting to the user to accept Oracle's terms of use" /></p>

<p>As soon as you accept the Oracle Terms of Use, the form will be pre-filled by some default values.</p>

<p>You can of course decide in which <a href="https://docs.oracle.com/en-us/iaas/Content/Identity/Tasks/managingcompartments.htm?source=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&pcode=WWMK211125P00025">compartment</a> you want to deploy the architecture:</p>

<p><img src="assets/oci-flow-create-compartment-sandbox-highlight.png" alt="The welcome page, displaying stack information including a callout to choose which sandbox to deploy to" /></p>

<p>The second screen of the wizard the most important form where we need to fill all the required variables and also change the architecture as we will see later:</p>

<p><img src="assets/oci-flow-required variables.png" alt="The required variables window, including password, username, and MySQL schema fields " /></p>

<p>The second part of the form looks like this. Note that we can enable <a href="https://blogs.oracle.com/mysql/mysql-database-service-with-high-availability?source=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK211125P00025:WW_FY22_DevRel_DotBuild&pcode=WWMK211125P00025">High Availability for MDS</a>, use multiple Web Server Instances or use existing infrastructure. This means that we have the possibility to use an existing VCN, subnets, etc…</p>

<p><img src="assets/oci-flow-webservers-shapes-fields.png" alt="Additional fields to complete, including webservers, shapes, and the option to use existing infrasctructure" /></p>

<p>And of course we can also specify the Shapes for the compute instances (from a dropdown list of the available shapes in your tenancy and compartment) and for the MDS instance (this one needs to be entered manually).</p>

<p>When we click next, we reach the last screen which summarize the choices and we can click on “Create.” By default the Architecture will be automatically applied (meaning all necessary resources will be deployed):</p>

<p><img src="assets/oci-flow-review-step-create-callout.png" alt="OCI deployment final screen, reviewing particulars before clicking the Create button" /></p>

<p>Now we need to be a little bit of patience while everything is deployed.</p>

<p><img src="assets/stack-with-banner-partial-logs.png" alt="Stack dashboard with a banner communicating that things are still running and only partial logs are avaialable" /></p>

<h2 id="other-possible-architectures">Other Possible Architectures</h2>

<p>As we could see earlier on the second screen of the stack’s creation wizard, we could also specify the use of multiple Web Servers. Then we have the possibility to deploy them on different Fault Domains (default) or use different Availability Domains:</p>

<p><img src="assets/oci-webservers-with-domain-fields.png" alt="Webservers screen with fields where you can determine which domains to run from" /></p>

<p>It’s possible to also specify if all Moodle servers will use their own database and user or share the same schema in case we want to use a load balancer in front of all the web servers and spread the load for the same site/application.</p>

<p>The default architecture with three web servers looks like this:</p>

<p><img src="assets/oci-moodle-mysql-in-fault-domains.png" alt="Network chart displaying MySQL's loaction in the first of three fault domains" /></p>

<p>And if you want to enable High Availability for the MDS instance, you just need to check the box:</p>

<p><img src="assets/oci-high-availability-for-mds-toggle.png" alt="Checkbox verifying the configuration of a High Availability for the MDS instance" /></p>

<p>And you will have an architecture like this:</p>

<p><img src="assets/oci-chart-moodle-mds-all-domains.png" alt="Network chart with MDS and Moodle in all three availability domains" /></p>

<p>## Finishing Moodle’s Installation</p>

<p>When the deployment using the stack is finished, you will the a nice large green square with “SUCCEEDED” and in the log you will also see some important information.</p>

<p><img src="assets/oci-stack-deployment-success-log-msg.png" alt="Log message displaying message of successful stack deployment" /></p>

<p>This information is also available in the Output section on the left:</p>

<p><img src="assets/oci-stack-deployment-outputs-selected.png" alt="An alternative way to ensure successful stack deployment: click 'Outputs'" /></p>

<p>Now, we just need to open a web browser and enter that public ip to finish the installation of Moodle:</p>

<p><img src="assets/moodle-select-language.png" alt="Moodle installation screen with language dropdown. English populated in field." /></p>

<p>And we follow the wizard until the database configuration section:</p>

<p><img src="assets/moodle-database-dropdown.png" alt="Moodle installation screen with database dropdown. Improved MySQL populated in field." /></p>

<p><img src="assets/moodle-database-settings.png" alt="Moodle installation flow. Database fields for configuration." /></p>

<p>On the screen above, we use the information that we can find in the Stack’s output section.</p>

<p>Then we continue the installation process until it’s completed and finally we can enjoy our new Moodle deployment:</p>

<p><img src="assets/moodle-deployment-dashboard.png" alt="Moodle deployment dashboard" /></p>


        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2021-10-27T09:12:00+00:00">October 27, 2021</time></p>


      </footer>

      

      

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/main.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
    <li>
      Back to <a href="https://developer.oracle.com?language=en&sourceType=:ow:de:te::::RC_WWMK211116P00260:DotBuildFooter&intcmp=:ow:de:te::::RC_WWMK211116P00260:DotBuildGetFooter">Developer.Oracle.com</a>
    </li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Oracle</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="/assets/js/custom.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  
    <script src="/assets/js/plugins/readmore.min.js"></script>
  


<!-- Start SiteCatalyst code -->
<script>
  var s_pageName = "devrel:en-us:";
  if (typeof(document.title) != "undefined") {
    var s_pageName = s_pageName + document.title.trim()
  };
</script>
<script src="https://www.oracleimg.com/us/assets/metrics/ora_otn.js"></script>
<!-- End SiteCatalyst code -->


  </body>
  
</html>
