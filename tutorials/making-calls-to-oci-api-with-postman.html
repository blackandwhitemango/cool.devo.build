<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.23.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Making calls to the Oracle Cloud API using Postman - Oracle Developer Tutorials</title>
<meta name="description" content="Learn how to make calls directly to the OCI API using Postman.">


  <meta name="author" content="Tim Clegg">
  
  <meta property="article:author" content="Tim Clegg">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Oracle Developer Tutorials">
<meta property="og:title" content="Making calls to the Oracle Cloud API using Postman">
<meta property="og:url" content="https://cool.devo.build/tutorials/making-calls-to-oci-api-with-postman">


  <meta property="og:description" content="Learn how to make calls directly to the OCI API using Postman.">



  <meta property="og:image" content="https://cool.devo.build/tutorials/assets/pexels-adis-bacinovic-7103901.jpg">




  <meta name="twitter:site" content="@groundbreakers">
  <meta name="twitter:title" content="Making calls to the Oracle Cloud API using Postman">
  <meta name="twitter:description" content="Learn how to make calls directly to the OCI API using Postman.">
  <meta name="twitter:url" content="https://cool.devo.build/tutorials/making-calls-to-oci-api-with-postman">

  
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://cool.devo.build/tutorials/assets/pexels-adis-bacinovic-7103901.jpg">
    
  

  



  <meta property="article:published_time" content="2022-02-03T07:19:00+00:00">






<link rel="canonical" href="https://cool.devo.build/tutorials/making-calls-to-oci-api-with-postman">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://cool.devo.build/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/main.xml" type="application/atom+xml" rel="alternate" title="Oracle Developer Tutorials Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



<link rel="icon" href="https://www.oracle.com/asset/web/favicons/favicon-32.png" sizes="32x32">

    
    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead oracle-header oracle-headerv1 oracle-headeradj oracle-headerdev">
  <div class="masthead__inner-wrap oracle-headerw1">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <div class="oracle-headers1 site-logo">
          <a class="oracle-logo" href="https://developer.oracle.com/"><span>Oracle</span></a>
        </div>
        <div class="u18-title site-title">
          <a href="/">
            Oracle Developer Tutorials
            
          </a>
        </div>

        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/topics/">Explore Topics</a>
            </li><li class="masthead__menu-item">
            <a href="https://signup.cloud.oracle.com/?language=en&sourceType=:ow:de:te::::RC_WWMK211116P00260:DotBuildGetStarted&intcmp=:ow:de:te::::RC_WWMK211116P00260:DotBuildGetStarted">Try Oracle Free</a>
          </li>
        </ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">

    <div class="sidebar sticky">
    <p><strong>Tags:</strong> <span class="tags">

            
            <a class="animated-link tag" href="/topics/api">api</a>
            <a class="animated-link tag" href="/topics/oci">oci</a>
            <a class="animated-link tag" href="/topics/postman">postman</a>
            </span>
    </p>
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Tim Clegg</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Code. Share. Secure. Innovate. Automate. Educate.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/https://www.linkedin.com/in/timothy-clegg/" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span>
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/timclegg" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  
  
  <p><strong>From this author:</strong>
    <ul>
      
        <li><a href="/tutorials/tf-101/1-why-iac">Why Infrastructure as Code?</a></li>
      
        <li><a href="/tutorials/tf-101/2-experiencing-terraform">Experiencing Terraform</a></li>
      
        <li><a href="/tutorials/tf-101/3-understanding-terraform-basics">Understanding The Basics Of Terraform</a></li>
      
        <li><a href="/tutorials/tf-101/4-variables">Terraform Variables</a></li>
      
        <li><a href="/tutorials/tf-101/5-creating">Creating Resources with Terraform</a></li>
      
        <li><a href="/tutorials/tf-101/6-changing">Making changes using Terraform</a></li>
      
        <li><a href="/tutorials/tf-101/7-destroying">Destroying resources with Terraform</a></li>
      
        <li><a href="/tutorials/tf-101/8-resources">More Terraform Resources</a></li>
      
        <li><a href="/tutorials/steampipe/">Steampipe on Oracle Cloud Infrastructure</a></li>
      
        <li><a href="/tutorials/tf-101/">Terraform 101</a></li>
      
    </ul>
  
  

  </div>


  <article class="page has-sidebar" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Making calls to the Oracle Cloud API using Postman">
    
    <meta itemprop="datePublished" content="2022-02-03T07:19:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Making calls to the Oracle Cloud API using Postman
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        

        <picture class="alignright">
                <source srcset="https://github.com/oracle-devrel/devo.tutorials/raw/main/assets/pexels-adis-bacinovic-7103901.jpg 1x" />
                <img loading="lazy" width="800" height="534" src="https://github.com/oracle-devrel/devo.tutorials/raw/main/assets/pexels-adis-bacinovic-7103901.jpg" data-original="https://github.com/oracle-devrel/devo.tutorials/raw/main/assets/pexels-adis-bacinovic-7103901.jpg" data-at2x="https://github.com/oracle-devrel/devo.tutorials/raw/main/assets/pexels-adis-bacinovic-7103901@2x.jpg" alt="Mail box" title="Mail box" />
            </picture>

<p><em>Photo credit: Photo by <a href="https://www.pexels.com/@adis-bacinovic-29729722?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels">Adis Bacinovic</a> from <a href="https://www.pexels.com/photo/close-up-shot-of-a-mailbox-7103901/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels">Pexels</a></em></p>

<blockquote class="notice">
  <p>This post is the author’s “notes from the field,” a personal exploration of the topic, filled with all of the journey’s pitfalls and little “Aha!” moments. It’s not meant to be a tutorial, but to illustrate the patterns and troubleshooting mindset it sometimes takes to successfully run a thing. Follow along and enjoy.</p>
</blockquote>

<p>Often when I’m building an automated solution, I’ll look at the <a href="https://registry.terraform.io/providers/hashicorp/oci/latest/docs">documentation for the OCI Terraform Provider</a>. Terraform is my typical go-to tool these days for automating OCI infrastructure, so it’s a logical place to start. Thankfully, the OCI Terraform Provider does a good job of sticking pretty close to the OCI API, so much of the terminology will be the same between the two. Sometimes, though, the Terraform documentation doesn’t have all of the details I need and I have to go a level deeper. This is the point where I typically dive into the <a href="https://docs.oracle.com/en-us/iaas/api/#/?source=:ex:tb:::::WWMK220203P00028:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK220203P00028:WW_FY22_DevRel_DotBuild&pcode=WWMK220203P00028">OCI API docs</a>.</p>

<h2 id="the-oci-api">The OCI API</h2>

<p>OCI has a terrific API. Really. In case you haven’t had the pleasure of perusing it, check out the <a href="https://docs.oracle.com/en-us/iaas/api/#/?source=:ex:tb:::::WWMK220203P00028:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK220203P00028:WW_FY22_DevRel_DotBuild&pcode=WWMK220203P00028">full API details</a>. It’s definitely worth digging in to.</p>

<p>The OCI API does have one or two idiosyncrasies, though, especially the signing process. It can be somewhat involved, which means that you can’t just easily “curl” it with off-the-shelf curl. Fortunately, there are <a href="https://docs.oracle.com/en-us/iaas/Content/API/Concepts/signingrequests.htm?source=:ex:tb:::::WWMK220203P00028:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK220203P00028:WW_FY22_DevRel_DotBuild&pcode=WWMK220203P00028">plenty of examples</a>, making it easier than ever to interact with the OCI API with your favorite language. I’ve also shared a quick-and-dirty way to interact with the OCI API using Ruby in <a href="https://blogs.oracle.com/developers/post/making-quick-and-dirty-rest-calls-to-the-oci-api-in-ruby?source=:ex:tb:::::WWMK220203P00028:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK220203P00028:WW_FY22_DevRel_DotBuild&pcode=WWMK220203P00028">another article</a>. Even with these tools, it still isn’t easy yet for me to fully explore the OCI API.</p>

<h2 id="interacting-with-the-oci-api">Interacting with the OCI API</h2>

<p>This is where tools like <a href="https://paw.cloud">Paw</a> and <a href="https://www.postman.com">Postman</a> shine. They’re both built to make it really easy to interact with APIs, and the type of apps I like to have on hand when I need to easily (and quickly) interact with the OCI API. Of the two, I opted to go with Postman since it doesn’t require a purchase (at least for the bare-bones functionality).</p>

<p>I started searching for some different options on how to get Postman to send the necessary format and stumbled across this <a href="https://www.ateam-oracle.com/post/invoking-oci-rest-apis-using-postman?source=:ex:tb:::::WWMK220203P00028:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK220203P00028:WW_FY22_DevRel_DotBuild&pcode=WWMK220203P00028">great article</a> which covered exactly what I was looking for. I followed the directions, which are summarized in the sections below.</p>

<h2 id="first-try">First try</h2>

<ol>
  <li>Clone the <a href="https://github.com/ashishksingh/postman_collection_for_oci_rest/blob/master/OCI_REST_COLLECTION.postman_collection.json">repo</a></li>
  <li>Import the <code class="language-plaintext highlighter-rouge">OCI_Environment</code> environment</li>
  <li>Set the values for the <code class="language-plaintext highlighter-rouge">tenancyId</code>, <code class="language-plaintext highlighter-rouge">authUserId</code>, <code class="language-plaintext highlighter-rouge">keyFingerprint</code>, and <code class="language-plaintext highlighter-rouge">privateKey</code> variables<br />
(only setting the <code class="language-plaintext highlighter-rouge">Current Value</code>, not the <code class="language-plaintext highlighter-rouge">Initial Value</code> for each)</li>
  <li>Import the <code class="language-plaintext highlighter-rouge">OCI_REST_INITIALIZATION</code> collection</li>
  <li>Run the <code class="language-plaintext highlighter-rouge">ONE_TIME_INITIALIZATION_CALL</code> call within the <code class="language-plaintext highlighter-rouge">OCI_REST_INITIALIZATION</code> collection</li>
  <li>Import the <code class="language-plaintext highlighter-rouge">OCI_REST_COLLECTION</code></li>
  <li>Modify the <code class="language-plaintext highlighter-rouge">GET_OCI_ANNOUNCEMENTS</code> call for the proper endpoint and <code class="language-plaintext highlighter-rouge">compartmentId</code></li>
</ol>

<p>At this point, I tried to run <code class="language-plaintext highlighter-rouge">GET_OCI_ANNOUNCEMENTS</code>, but didn’t have any success. I validated all of my credentials and they were correct… What?!  Why?!</p>

<p>I noticed that my API key had a password, but I hadn’t entered it anywhere. This is when I face-palmed myself, realizing that I’d failed to set the <code class="language-plaintext highlighter-rouge">passphrase</code> variable (again, just the <code class="language-plaintext highlighter-rouge">Current value</code>). After doing that, it worked great!</p>

<p>Ugh. Some of the simplest things can present the greatest challenges!</p>

<h2 id="finally-working">Finally working</h2>

<p>To summarize, here are the steps I took that worked for me:</p>

<ol>
  <li>Clone the <a href="https://github.com/ashishksingh/postman_collection_for_oci_rest/blob/master/OCI_REST_COLLECTION.postman_collection.json">repo</a></li>
  <li>Import the <code class="language-plaintext highlighter-rouge">OCI_Environment</code> environment</li>
  <li>Set the values for the <code class="language-plaintext highlighter-rouge">tenancyId</code>, <code class="language-plaintext highlighter-rouge">authUserId</code>, <code class="language-plaintext highlighter-rouge">keyFingerprint</code>, <code class="language-plaintext highlighter-rouge">privateKey</code>, and <strong><code class="language-plaintext highlighter-rouge">passphrase</code></strong> variables<br />
(only setting the <code class="language-plaintext highlighter-rouge">Current Value</code>, not the <code class="language-plaintext highlighter-rouge">Initial Value</code> for each)</li>
  <li>Import the <code class="language-plaintext highlighter-rouge">OCI_REST_INITIALIZATION</code> collection</li>
  <li>Run the <code class="language-plaintext highlighter-rouge">ONE_TIME_INITIALIZATION_CALL</code> call within the <code class="language-plaintext highlighter-rouge">OCI_REST_INITIALIZATION</code> collection</li>
  <li>Import the <code class="language-plaintext highlighter-rouge">OCI_REST_COLLECTION</code></li>
  <li>Modify the <code class="language-plaintext highlighter-rouge">GET_OCI_ANNOUNCEMENTS</code> call for the proper endpoint and <code class="language-plaintext highlighter-rouge">compartmentId</code></li>
</ol>

<p>Which is almost identical to the first pass, except this time I made sure to set the <code class="language-plaintext highlighter-rouge">Current Value</code> of the <code class="language-plaintext highlighter-rouge">passphrase</code> variable.</p>

<p>With that out of the way, I was able to move forward. I was thrilled by the ability to easily make calls, but what I really needed was the ability to quickly switch between different OCI environments.</p>

<h2 id="multiple-postman-environments">Multiple Postman Environments</h2>

<p>One of the great things about Postman Environments is that they’re designed to allow you to quickly switch as needed. My intention was to leverage a different Postman Environment for each OCI tenancy I needed to access through a handy custom script. I tried duplicating the <code class="language-plaintext highlighter-rouge">OCI_Environment</code> in the Postman Environment, making sure that the values got moved with it, but that didn’t seem to work. Eventually, I discovered that I was copying the private key contents from one Environment to another, and that the formatting was being stripped/changed (within Postman). The solution was to copy the key contents and paste a fresh copy into the new Environment. Voila! Success!</p>

<h2 id="refactoring-the-script">Refactoring the script</h2>

<p>Now, I <em>should</em> have submitted a PR, but I’m including it here so I can share it for now. To get this super-awesome script to work with variables, there are a few small modifications that could be made:</p>

<table>
  <thead>
    <tr>
      <th>Original line</th>
      <th>New line</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">var host = pm.request.url.host.join(".") ;</code></td>
      <td><code class="language-plaintext highlighter-rouge">var host = pm.variables.replaceIn(pm.request.url.host.join("."));</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">var escapedTarget = encodeURI(request.url.split(pm.request.url.host.join("."))[1]);</code></td>
      <td><code class="language-plaintext highlighter-rouge">var escapedTarget = encodeURI(pm.variables.replaceIn(request.url.split(pm.request.url.host.join(".")))[1]);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">body = pm.request.body.raw;</code></td>
      <td><code class="language-plaintext highlighter-rouge">body = pm.variables.replaceIn(pm.request.body.raw);</code></td>
    </tr>
  </tbody>
</table>

<p>The above few changes seem to permit me to use variables, which allows me to greatly extend the script.</p>

<h2 id="refactored-call">Refactored call</h2>

<p>Now that we’ve sorted out the script, let’s refactor the example given in the code, changing the <code class="language-plaintext highlighter-rouge">GET_OCI_ANNOUNCEMENTS</code> call. Start by adding the following variables:</p>

<table>
  <thead>
    <tr>
      <th>Variable Lives In (Type)</th>
      <th style="text-align: center">Variable Name</th>
      <th style="text-align: center">Variable Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OCI_REST_COLLECTION</code> (Collection)</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">oci_domain</code></td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">oraclecloud.com</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OCI_Environment</code> (or whatever you’re using) (Environment)</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">oci_region</code></td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&lt;the OCI region you're talking to&gt;</code></td>
    </tr>
  </tbody>
</table>

<p>Next, go to the <code class="language-plaintext highlighter-rouge">GET_OCI_ANNOUNCEMENTS</code> GET call and modify the request path to be:</p>

<p><code class="language-plaintext highlighter-rouge">https://announcements../20180904/announcements?compartmentId=</code></p>

<p>This tells it to use the OCI region specified in the Environment, as well as the <code class="language-plaintext highlighter-rouge">tenancyId</code> (also specified in the Environment) and the OCI domain name that’s set in the Collection.</p>

<h2 id="conclusion">Conclusion</h2>

<p>As usual, something that seemed so cut and dry ended up being quite a bit more involved. But, we’ve got a solution now, and a way to interact with the OCI API using Postman on our local computer. Yay!</p>

<!--- Links -->



        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2022-02-03T07:19:00+00:00">February 3, 2022</time></p>


      </footer>

      

      

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/main.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
    <li>
      Back to <a href="https://developer.oracle.com?language=en&sourceType=:ow:de:te::::RC_WWMK211116P00260:DotBuildFooter&intcmp=:ow:de:te::::RC_WWMK211116P00260:DotBuildGetFooter">Developer.Oracle.com</a>
    </li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Oracle</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="/assets/js/custom.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  
    <script src="/assets/js/plugins/readmore.min.js"></script>
  


<!-- Start SiteCatalyst code -->
<script>
  var s_pageName = "devrel:en-us:";
  if (typeof(document.title) != "undefined") {
    var s_pageName = s_pageName + document.title.trim()
  };
</script>
<script src="https://www.oracleimg.com/us/assets/metrics/ora_otn.js"></script>
<!-- End SiteCatalyst code -->


  </body>
  
</html>
